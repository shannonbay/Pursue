# pursue-app structure index
module: pursue-app
root: pursue-app/app/src/main/java/app/getpursue
description: Android app (Kotlin) for goal accountability with Firebase Cloud Messaging, Google Sign-In, JWT auth, and local caching

directories:
  - name: data/network/
    description: Network layer - API client, interceptors, and authenticators
  - name: data/auth/
    description: Authentication - token management, Google Sign-In, auth state
  - name: data/fcm/
    description: Firebase Cloud Messaging - token management, topic subscriptions, device registration
  - name: data/notifications/
    description: Notification preferences and filtering
  - name: models/
    description: API response DTOs and UI models
  - name: ui/activities/
    description: Activities - entry points and main screens
  - name: ui/fragments/
    description: Fragments organized by feature (home, groups, goals, onboarding)
  - name: ui/adapters/
    description: RecyclerView adapters for lists
  - name: ui/handlers/
    description: Shared business logic handlers
  - name: ui/dialogs/
    description: Dialog fragments
  - name: ui/views/
    description: Custom views and bottom sheets
  - name: utils/
    description: Utility functions

files:
  GlideModule.kt:
    description: Custom Glide module for authenticated image requests with Bearer token
    exports:
      - name: PursueGlideModule
        kind: class
        extends: AppGlideModule
        methods:
          - name: registerComponents
            params: [{name: context, type: Context}, {name: glide, type: Glide}, {name: registry, type: Registry}]
            returns: void
            description: Register OkHttpClient with auth header for image requests
          - name: isManifestParsingEnabled
            params: []
            returns: Boolean
            description: Disable manifest parsing
    imports:
      - app.getpursue.data.auth.SecureTokenManager
      - com.bumptech.glide (Glide integration)

  PursueApplication.kt:
    description: Application class initializing ApiClient with OkHttpClient
    exports:
      - name: PursueApplication
        kind: class
        extends: Application
        methods:
          - name: onCreate
            params: []
            returns: void
            description: Initialize ApiClient with configured OkHttpClient
    imports:
      - app.getpursue.data.network.ApiClient

  data/network/ApiClient.kt:
    description: Singleton API client with 50+ suspend functions for all backend endpoints
    exports:
      - name: ApiClient
        kind: object
        description: Singleton HTTP client for all API endpoints
        methods:
          # Auth endpoints
          - name: register
            params: [{name: displayName, type: String}, {name: email, type: String}, {name: password, type: String}]
            returns: RegistrationResponse
            description: POST /auth/register - Register new user account
          - name: login
            params: [{name: email, type: String}, {name: password, type: String}]
            returns: LoginResponse
            description: POST /auth/login - Sign in with email and password
          - name: refreshToken
            params: [{name: refreshToken, type: String}]
            returns: RefreshTokenResponse
            description: POST /auth/refresh - Refresh access token
          - name: signInWithGoogle
            params: [{name: idToken, type: String}]
            returns: GoogleSignInResponse
            description: POST /auth/google - Sign in or register with Google OAuth
          # Device endpoints
          - name: registerDevice
            params: [{name: accessToken, type: String}, {name: fcmToken, type: String}, {name: deviceName, type: String}, {name: platform, type: String}]
            returns: DeviceRegistrationResponse
            description: POST /devices/register - Register device for push notifications
          # User endpoints
          - name: getMyUser
            params: [{name: accessToken, type: String}]
            returns: User
            description: GET /users/me - Get current user profile
          - name: getMyGroups
            params: [{name: accessToken, type: String}, {name: limit, type: Int}, {name: offset, type: Int}]
            returns: GroupsResponse
            description: GET /users/me/groups - Get user's groups
          - name: getMyProgress
            params: [{name: accessToken, type: String}, {name: startDate, type: String}, {name: endDate, type: String}]
            returns: MyProgressResponse
            description: GET /users/me/progress - Get user's progress data (streak, heatmap, goal breakdown)
          - name: getTodayGoals
            params: [{name: accessToken, type: String}]
            returns: TodayGoalsResponse
            description: Aggregates group goals for today via client-side logic
          # Subscription endpoints
          - name: getSubscription
            params: [{name: accessToken, type: String}]
            returns: SubscriptionState
            description: GET /users/me/subscription - Get subscription tier and limits
          - name: getSubscriptionEligibility
            params: [{name: accessToken, type: String}]
            returns: SubscriptionEligibility
            description: GET /users/me/subscription/eligibility - Check group create/join eligibility
          - name: upgradeSubscription
            params: [{name: accessToken, type: String}, {name: platform, type: String}, {name: purchaseToken, type: String}, {name: productId, type: String}]
            returns: UpgradeSubscriptionResponse
            description: POST /subscriptions/upgrade - Upgrade to premium
          - name: downgradeSelectGroup
            params: [{name: accessToken, type: String}, {name: keepGroupId, type: String}]
            returns: DowngradeSelectGroupResponse
            description: POST /subscriptions/downgrade/select-group - Select group to keep on downgrade
          # Avatar endpoints
          - name: uploadAvatar
            params: [{name: accessToken, type: String}, {name: imageFile, type: File}]
            returns: UploadAvatarResponse
            description: POST /users/me/avatar - Upload user avatar image
          - name: getAvatar
            params: [{name: accessToken, type: String}, {name: userId, type: String}]
            returns: ResponseBody?
            description: GET /users/{userId}/avatar - Get user avatar as binary data
          - name: deleteAvatar
            params: [{name: accessToken, type: String}]
            returns: DeleteAvatarResponse
            description: DELETE /users/me/avatar - Delete user avatar
          # Group endpoints
          - name: createGroup
            params: [{name: accessToken, type: String}, {name: name, type: String}, {name: description, type: String}, {name: iconEmoji, type: String}, {name: iconColor, type: String}]
            returns: CreateGroupResponse
            description: POST /groups - Create new group
          - name: getGroupDetails
            params: [{name: accessToken, type: String}, {name: groupId, type: String}]
            returns: GroupDetailResponse
            description: GET /groups/{groupId} - Get group details
          - name: patchGroup
            params: [{name: accessToken, type: String}, {name: groupId, type: String}, {name: name, type: String}, {name: description, type: String}, {name: iconEmoji, type: String}, {name: iconColor, type: String}]
            returns: PatchGroupResponse
            description: PATCH /groups/{groupId} - Update group metadata
          - name: deleteGroup
            params: [{name: accessToken, type: String}, {name: groupId, type: String}]
            returns: void
            description: DELETE /groups/{groupId} - Delete group
          - name: leaveGroup
            params: [{name: accessToken, type: String}, {name: groupId, type: String}]
            returns: void
            description: DELETE /groups/{groupId}/members/me - Leave group
          # Group icon endpoints
          - name: getGroupIcon
            params: [{name: accessToken, type: String}, {name: groupId, type: String}]
            returns: ResponseBody?
            description: GET /groups/{groupId}/icon - Get group icon image as binary
          - name: uploadGroupIcon
            params: [{name: accessToken, type: String}, {name: groupId, type: String}, {name: imageFile, type: File}]
            returns: PatchGroupIconResponse
            description: PATCH /groups/{groupId}/icon - Upload group icon image
          # Invite endpoints
          - name: getGroupInviteCode
            params: [{name: accessToken, type: String}, {name: groupId, type: String}]
            returns: GetInviteCodeResponse
            description: GET /groups/{groupId}/invite - Get current invite code
          - name: regenerateInviteCode
            params: [{name: accessToken, type: String}, {name: groupId, type: String}]
            returns: RegenerateInviteResponse
            description: POST /groups/{groupId}/invite/regenerate - Generate new invite code
          - name: joinGroup
            params: [{name: accessToken, type: String}, {name: inviteCode, type: String}]
            returns: JoinGroupResponse
            description: POST /groups/join - Join group via invite code
          - name: getInviteBaseUrl
            params: []
            returns: String
            description: Get app invite base URL for join links
          # Members endpoints
          - name: getGroupMembers
            params: [{name: accessToken, type: String}, {name: groupId, type: String}]
            returns: GroupMembersResponse
            description: GET /groups/{groupId}/members - Get group members
          - name: getPendingMembers
            params: [{name: accessToken, type: String}, {name: groupId, type: String}]
            returns: PendingMembersResponse
            description: GET /groups/{groupId}/members/pending - Get pending join requests
          - name: approveMember
            params: [{name: accessToken, type: String}, {name: groupId, type: String}, {name: userId, type: String}]
            returns: void
            description: POST /groups/{groupId}/members/{userId}/approve - Approve pending member
          - name: declineMember
            params: [{name: accessToken, type: String}, {name: groupId, type: String}, {name: userId, type: String}]
            returns: void
            description: POST /groups/{groupId}/members/{userId}/decline - Decline pending member
          - name: updateMemberRole
            params: [{name: accessToken, type: String}, {name: groupId, type: String}, {name: userId, type: String}, {name: role, type: String}]
            returns: void
            description: PATCH /groups/{groupId}/members/{userId} - Update member role
          - name: removeMember
            params: [{name: accessToken, type: String}, {name: groupId, type: String}, {name: userId, type: String}]
            returns: void
            description: DELETE /groups/{groupId}/members/{userId} - Remove member from group
          # Goals endpoints
          - name: getGroupGoals
            params: [{name: accessToken, type: String}, {name: groupId, type: String}, {name: cadence, type: String}, {name: archived, type: Boolean}, {name: includeProgress, type: Boolean}, {name: userTimezone, type: String}]
            returns: GroupGoalsResponse
            description: GET /groups/{groupId}/goals - Get group goals with optional progress
          - name: createGoal
            params: [{name: accessToken, type: String}, {name: groupId, type: String}, {name: title, type: String}, {name: description, type: String}, {name: cadence, type: String}, {name: metricType, type: String}, {name: targetValue, type: Double}, {name: unit, type: String}]
            returns: CreateGoalResponse
            description: POST /groups/{groupId}/goals - Create goal
          - name: getGoal
            params: [{name: accessToken, type: String}, {name: goalId, type: String}]
            returns: GetGoalResponse
            description: GET /goals/{goalId} - Get goal details
          - name: updateGoal
            params: [{name: accessToken, type: String}, {name: goalId, type: String}, {name: title, type: String}, {name: description, type: String}]
            returns: UpdateGoalResponse
            description: PATCH /goals/{goalId} - Update goal
          - name: deleteGoal
            params: [{name: accessToken, type: String}, {name: goalId, type: String}]
            returns: void
            description: DELETE /goals/{goalId} - Soft-delete goal
          # Progress endpoints
          - name: getGoalProgress
            params: [{name: accessToken, type: String}, {name: goalId, type: String}, {name: startDate, type: String}, {name: endDate, type: String}]
            returns: GoalProgressResponse
            description: GET /goals/{goalId}/progress - Get all users' progress for goal
          - name: getGoalProgressMe
            params: [{name: accessToken, type: String}, {name: goalId, type: String}, {name: startDate, type: String}, {name: endDate, type: String}]
            returns: GoalProgressMeResponse
            description: GET /goals/{goalId}/progress/me - Get current user's progress for goal
          - name: logProgress
            params: [{name: accessToken, type: String}, {name: goalId, type: String}, {name: value, type: Double}, {name: note, type: String}, {name: userDate, type: String}, {name: userTimezone, type: String}]
            returns: LogProgressResponse
            description: POST /progress - Log progress entry
          - name: deleteProgressEntry
            params: [{name: accessToken, type: String}, {name: entryId, type: String}]
            returns: void
            description: DELETE /progress/{entryId} - Delete progress entry
          # Activity endpoints
          - name: getGroupActivity
            params: [{name: accessToken, type: String}, {name: groupId, type: String}, {name: limit, type: Int}, {name: offset, type: Int}]
            returns: GroupActivityResponse
            description: GET /groups/{groupId}/activity - Get group activity feed
          # Export endpoints
          - name: exportGroupProgress
            params: [{name: accessToken, type: String}, {name: groupId, type: String}, {name: startDate, type: String}, {name: endDate, type: String}, {name: userTimezone, type: String}]
            returns: ByteArray
            description: GET /groups/{groupId}/export-progress - Export group progress as Excel
          - name: validateExportRange
            params: [{name: accessToken, type: String}, {name: groupId, type: String}, {name: startDate, type: String}, {name: endDate, type: String}]
            returns: ValidateExportRangeResponse
            description: GET /groups/{groupId}/export-progress/validate-range - Validate export date range
          # Base URL management
          - name: getBaseUrl
            params: []
            returns: String
            description: Get current API base URL
          - name: setBaseUrlForE2E
            params: [{name: url, type: String}]
            returns: void
            description: Override base URL for E2E tests
          - name: resetBaseUrlForE2E
            params: []
            returns: void
            description: Restore default base URL after E2E
          - name: buildClient
            params: [{name: context, type: Context}]
            returns: OkHttpClient
            description: Build OkHttpClient with interceptors and authenticator
          - name: initialize
            params: [{name: client, type: OkHttpClient}]
            returns: void
            description: Initialize ApiClient with pre-built OkHttpClient
      - name: RegistrationResponse
        kind: dataclass
        properties:
          - {name: access_token, type: String}
          - {name: refresh_token, type: String}
          - {name: user, type: User?}
      - name: LoginResponse
        kind: dataclass
        properties:
          - {name: access_token, type: String}
          - {name: refresh_token, type: String}
          - {name: user, type: User?}
      - name: GoogleSignInResponse
        kind: dataclass
        properties:
          - {name: access_token, type: String}
          - {name: refresh_token, type: String}
          - {name: is_new_user, type: Boolean}
          - {name: user, type: User?}
      - name: User
        kind: dataclass
        properties:
          - {name: id, type: String}
          - {name: email, type: String}
          - {name: display_name, type: String}
          - {name: has_avatar, type: Boolean}
          - {name: updated_at, type: String?}
      - name: ApiException
        kind: class
        description: Custom exception for API errors with error code
        properties:
          - {name: code, type: Int}
          - {name: message, type: String}
          - {name: errorCode, type: String?}
    imports:
      - app.getpursue.data.auth.SecureTokenManager
      - okhttp3 (HTTP client)
      - com.google.gson.Gson (JSON serialization)

  data/network/AuthInterceptor.kt:
    description: Adds Authorization header with Bearer token to authenticated API requests
    exports:
      - name: AuthInterceptor
        kind: class
        implements: Interceptor
        methods:
          - name: intercept
            params: [{name: chain, type: Interceptor.Chain}]
            returns: Response
            description: Intercept requests and add Authorization header
          - name: shouldSkipAuth
            params: [{name: url, type: String}]
            returns: Boolean
            description: Check if request should skip auth (public endpoints)
    imports:
      - app.getpursue.data.auth.SecureTokenManager
      - okhttp3 (HTTP interceptor)

  data/network/TokenAuthenticator.kt:
    description: Automatically refreshes access token on 401 responses
    exports:
      - name: TokenAuthenticator
        kind: class
        implements: Authenticator
        methods:
          - name: authenticate
            params: [{name: route, type: Route?}, {name: response, type: Response}]
            returns: Request?
            description: Handle 401 response by refreshing token and retrying request
    imports:
      - app.getpursue.data.auth.SecureTokenManager
      - app.getpursue.data.auth.AuthRepository
      - app.getpursue.data.network.ApiClient
      - okhttp3 (HTTP authenticator)
      - kotlinx.coroutines (Mutex, runBlocking)

  data/network/UserNotFoundSignOutInterceptor.kt:
    description: Signs out user when backend returns 404 for current user endpoint
    exports:
      - name: UserNotFoundSignOutInterceptor
        kind: class
        implements: Interceptor
        methods:
          - name: intercept
            params: [{name: chain, type: Interceptor.Chain}]
            returns: Response
            description: Intercept 404 responses for /users/me and trigger sign-out
    imports:
      - app.getpursue.data.auth.SecureTokenManager
      - app.getpursue.data.auth.AuthRepository
      - okhttp3 (HTTP interceptor)

  data/auth/SecureTokenManager.kt:
    description: Singleton managing JWT token storage using Android Keystore and EncryptedSharedPreferences
    exports:
      - name: SecureTokenManager
        kind: class
        description: Thread-safe singleton for secure token storage with fallback to in-memory for E2E tests
        methods:
          - name: storeTokens
            params: [{name: accessToken, type: String}, {name: refreshToken, type: String}]
            returns: void
            description: Store access and refresh tokens securely
          - name: getAccessToken
            params: []
            returns: String?
            description: Retrieve access token or null
          - name: getRefreshToken
            params: []
            returns: String?
            description: Retrieve refresh token or null
          - name: updateAccessToken
            params: [{name: accessToken, type: String}]
            returns: void
            description: Update only access token after refresh
          - name: hasTokens
            params: []
            returns: Boolean
            description: Check if tokens are stored
          - name: clearTokens
            params: []
            returns: void
            description: Clear all stored tokens (logout)
          - name: getInstance
            params: [{name: context, type: Context}]
            returns: SecureTokenManager
            description: Get singleton instance (thread-safe)
          - name: setTestOverride
            params: [{name: accessToken, type: String}, {name: refreshToken, type: String}]
            returns: void
            description: Set in-memory tokens for E2E testing
          - name: clearTestOverride
            params: []
            returns: void
            description: Clear in-memory test override
    imports:
      - androidx.security.crypto (Encrypted SharedPreferences, Android Keystore)

  data/auth/AuthRepository.kt:
    description: Repository for managing authentication state with StateFlow
    exports:
      - name: AuthRepository
        kind: class
        description: Singleton managing auth state and sign out
        methods:
          - name: signOut
            params: []
            returns: void
            description: Clear tokens and emit SignedOut state
          - name: isSignedIn
            params: []
            returns: Boolean
            description: Check if user is currently signed in
          - name: setSignedIn
            params: []
            returns: void
            description: Update state to SignedIn after successful auth
          - name: getInstance
            params: [{name: context, type: Context}]
            returns: AuthRepository
            description: Get singleton instance (thread-safe)
        properties:
          - {name: authState, type: StateFlow<AuthState>, description: Observable auth state}
      - name: AuthState
        kind: sealedclass
        description: Authentication state enum
        values:
          - SignedIn
          - SignedOut
    imports:
      - kotlinx.coroutines.flow (StateFlow)

  data/auth/GoogleSignInHelper.kt:
    description: Helper for Google Sign-In integration using Google Play Services
    exports:
      - name: GoogleSignInHelper
        kind: class
        methods:
          - name: getSignInIntent
            params: []
            returns: Intent
            description: Get Intent to start Google Sign-In flow
          - name: signOut
            params: []
            returns: void
            description: Sign out from Google for account selection on next sign-in
          - name: handleSignInResult
            params: [{name: data, type: Intent?}]
            returns: GoogleSignInResult
            description: Handle result from Google Sign-In activity
      - name: GoogleSignInResult
        kind: sealedclass
        description: Result of Google Sign-In operation
        values:
          - {name: Success, properties: [{name: account, type: GoogleSignInAccount}]}
          - {name: Error, properties: [{name: message, type: String}]}
          - {name: Cancelled}
    imports:
      - com.google.android.gms.auth (Google Sign-In)

  data/fcm/FcmTokenManager.kt:
    description: Singleton managing FCM token retrieval, caching, and registration status
    exports:
      - name: FcmTokenManager
        kind: class
        description: Thread-safe singleton for FCM token management
        methods:
          - name: getToken
            params: []
            returns: String?
            description: Get FCM token, retrieving from Firebase if not cached
          - name: cacheToken
            params: [{name: token, type: String}]
            returns: void
            description: Cache token directly (e.g., from onNewToken callback)
          - name: isTokenRegistered
            params: []
            returns: Boolean
            description: Check if token is registered with server
          - name: markTokenRegistered
            params: []
            returns: void
            description: Mark token as registered with server
          - name: markTokenUnregistered
            params: []
            returns: void
            description: Mark token as not registered (for retry on token refresh)
          - name: clearToken
            params: []
            returns: void
            description: Clear cached token and registration status (logout)
          - name: getDeviceName
            params: []
            returns: String
            description: Get human-readable device name for registration
          - name: getInstance
            params: [{name: context, type: Context}]
            returns: FcmTokenManager
            description: Get singleton instance (thread-safe)
    imports:
      - com.google.firebase.messaging.FirebaseMessaging
      - kotlinx.coroutines.tasks.await

  data/fcm/FcmTopicManager.kt:
    description: Singleton managing FCM topic subscriptions for group notifications
    exports:
      - name: FcmTopicManager
        kind: object
        description: Manages topic subscriptions for progress logs and group events
        properties:
          - {name: TOPIC_PROGRESS_LOGS, type: String, value: progress_logs}
          - {name: TOPIC_GROUP_EVENTS, type: String, value: group_events}
        methods:
          - name: buildTopicName
            params: [{name: groupId, type: String}, {name: type, type: String}]
            returns: String
            description: Build topic name in format {groupId}_{topicType}
          - name: subscribeToTopic
            params: [{name: topic, type: String}]
            returns: Boolean
            description: Subscribe to specific topic
          - name: unsubscribeFromTopic
            params: [{name: topic, type: String}]
            returns: Boolean
            description: Unsubscribe from specific topic
          - name: subscribeToGroupTopics
            params: [{name: context, type: Context}, {name: groupId, type: String}]
            returns: void
            description: Subscribe to group topics based on notification preferences
          - name: unsubscribeFromGroupTopics
            params: [{name: groupId, type: String}]
            returns: void
            description: Unsubscribe from all topics for a group (on leave)
          - name: updatePreferenceForAllGroups
            params: [{name: groupIds, type: List<String>}, {name: topicType, type: String}, {name: enabled, type: Boolean}]
            returns: void
            description: Update topic subscription across all groups on preference change
          - name: resubscribeToAllTopics
            params: [{name: context, type: Context}, {name: groupIds, type: List<String>}]
            returns: void
            description: Resubscribe to all topics after token refresh
    imports:
      - com.google.firebase.messaging.FirebaseMessaging
      - app.getpursue.data.notifications.NotificationPreferences

  data/fcm/FcmRegistrationHelper.kt:
    description: Helper for registering FCM token with backend server
    exports:
      - name: FcmRegistrationHelper
        kind: object
        description: Centralized logic for FCM token registration and retry
        methods:
          - name: registerFcmTokenIfNeeded
            params: [{name: context, type: Context}, {name: accessToken, type: String}]
            returns: Boolean
            description: Register FCM token if not already registered; idempotent
    imports:
      - app.getpursue.data.fcm.FcmTokenManager
      - app.getpursue.data.network.ApiClient
      - kotlinx.coroutines (Dispatchers)

  data/fcm/PursueFirebaseMessagingService.kt:
    description: Firebase Cloud Messaging service handling push notifications and token refresh
    exports:
      - name: PursueFirebaseMessagingService
        kind: class
        extends: FirebaseMessagingService
        methods:
          - name: onNewToken
            params: [{name: token, type: String}]
            returns: void
            description: Called when FCM generates new token; re-registers and resubscribes to topics
          - name: onMessageReceived
            params: [{name: remoteMessage, type: RemoteMessage}]
            returns: void
            description: Called on incoming push notification; shows notification if preferences allow
    imports:
      - com.google.firebase.messaging (FCM)
      - app.getpursue.data.fcm.FcmTokenManager
      - app.getpursue.data.fcm.FcmTopicManager
      - app.getpursue.data.fcm.FcmRegistrationHelper
      - app.getpursue.data.notifications.NotificationPreferences
      - app.getpursue.ui.activities (MainActivity, GroupDetailActivity)

  data/notifications/NotificationPreferences.kt:
    description: Singleton managing notification preferences with FCM topic integration
    exports:
      - name: NotificationPreferences
        kind: object
        description: Store and expose notification filtering preferences
        methods:
          - name: getNotifyProgressLogs
            params: [{name: context, type: Context}]
            returns: Boolean
            description: Check if progress log notifications are enabled
          - name: setNotifyProgressLogs
            params: [{name: context, type: Context}, {name: enabled, type: Boolean}]
            returns: void
            description: Set progress log notification preference
          - name: getNotifyGroupEvents
            params: [{name: context, type: Context}]
            returns: Boolean
            description: Check if group event notifications are enabled
          - name: setNotifyGroupEvents
            params: [{name: context, type: Context}, {name: enabled, type: Boolean}]
            returns: void
            description: Set group event notification preference
          - name: setNotifyProgressLogsWithTopics
            params: [{name: context, type: Context}, {name: enabled, type: Boolean}, {name: groupIds, type: List<String>}]
            returns: void
            description: Update progress logs preference and manage FCM subscriptions
          - name: setNotifyGroupEventsWithTopics
            params: [{name: context, type: Context}, {name: enabled, type: Boolean}, {name: groupIds, type: List<String>}]
            returns: void
            description: Update group events preference and manage FCM subscriptions
          - name: shouldShowNotification
            params: [{name: context, type: Context}, {name: type, type: String?}]
            returns: Boolean
            description: Check if notification should be displayed based on type and preferences
    imports:
      - app.getpursue.data.fcm.FcmTopicManager
      - kotlinx.coroutines

  models/Group.kt:
    description: Data models for group list responses
    exports:
      - name: GroupsResponse
        kind: dataclass
        properties:
          - {name: groups, type: List<Group>}
          - {name: total, type: Int}
      - name: Group
        kind: dataclass
        properties:
          - {name: id, type: String}
          - {name: name, type: String}
          - {name: description, type: String?}
          - {name: icon_emoji, type: String?}
          - {name: icon_color, type: String?}
          - {name: has_icon, type: Boolean}
          - {name: member_count, type: Int}
          - {name: role, type: String}
          - {name: joined_at, type: String}
          - {name: updated_at, type: String?}
          - {name: is_read_only, type: Boolean}

  models/GroupDetailResponse.kt:
    description: Data model for group detail endpoint response
    exports:
      - name: GroupDetailResponse
        kind: dataclass
        properties:
          - {name: id, type: String}
          - {name: name, type: String}
          - {name: description, type: String?}
          - {name: icon_emoji, type: String?}
          - {name: icon_color, type: String?}
          - {name: has_icon, type: Boolean}
          - {name: creator_user_id, type: String}
          - {name: member_count, type: Int}
          - {name: created_at, type: String}
          - {name: user_role, type: String}

  models/GroupActivity.kt:
    description: Data models for group activity feed
    exports:
      - name: GroupActivityResponse
        kind: dataclass
        properties:
          - {name: activities, type: List<GroupActivity>}
          - {name: total, type: Int}
      - name: GroupActivity
        kind: dataclass
        properties:
          - {name: id, type: String?}
          - {name: activity_type, type: String}
          - {name: user, type: ActivityUser}
          - {name: metadata, type: Map<String, Any>?}
          - {name: created_at, type: String}
      - name: ActivityUser
        kind: dataclass
        properties:
          - {name: id, type: String}
          - {name: display_name, type: String}

  models/GroupGoal.kt:
    description: Data models for group goal with progress
    exports:
      - name: GroupGoal
        kind: dataclass
        properties:
          - {name: id, type: String}
          - {name: group_id, type: String}
          - {name: title, type: String}
          - {name: description, type: String?}
          - {name: cadence, type: String}
          - {name: metric_type, type: String}
          - {name: target_value, type: Double?}
          - {name: unit, type: String?}
          - {name: created_at, type: String}
          - {name: completed, type: Boolean}
          - {name: progress_value, type: Double?}
          - {name: member_progress, type: List<MemberProgress>}
      - name: MemberProgress
        kind: dataclass
        properties:
          - {name: user_id, type: String}
          - {name: display_name, type: String}
          - {name: completed, type: Boolean}
          - {name: progress_value, type: Double?}

  models/GroupGoalsResponse.kt:
    description: Data models for group goals endpoint with progress details
    exports:
      - name: GroupGoalsResponse
        kind: dataclass
        properties:
          - {name: goals, type: List<GroupGoalResponse>}
          - {name: total, type: Int}
      - name: GroupGoalResponse
        kind: dataclass
        properties:
          - {name: id, type: String}
          - {name: group_id, type: String}
          - {name: title, type: String}
          - {name: description, type: String?}
          - {name: cadence, type: String}
          - {name: metric_type, type: String}
          - {name: target_value, type: Double?}
          - {name: unit, type: String?}
          - {name: created_by_user_id, type: String}
          - {name: created_at, type: String}
          - {name: archived_at, type: String?}
          - {name: current_period_progress, type: CurrentPeriodProgress?}
      - name: CurrentPeriodProgress
        kind: dataclass
        properties:
          - {name: start_date, type: String}
          - {name: end_date, type: String}
          - {name: period_type, type: String}
          - {name: user_progress, type: UserProgress}
          - {name: member_progress, type: List<MemberProgressResponse>}
      - name: UserProgress
        kind: dataclass
        properties:
          - {name: completed, type: Double}
          - {name: total, type: Double}
          - {name: percentage, type: Int}
          - {name: entries, type: List<ProgressEntry>}
      - name: ProgressEntry
        kind: dataclass
        properties:
          - {name: date, type: String}
          - {name: value, type: Double}
      - name: MemberProgressResponse
        kind: dataclass
        properties:
          - {name: user_id, type: String}
          - {name: display_name, type: String}
          - {name: avatar_url, type: String?}
          - {name: completed, type: Double}
          - {name: percentage, type: Int}

  models/GroupMember.kt:
    description: Data models for group members endpoint
    exports:
      - name: GroupMembersResponse
        kind: dataclass
        properties:
          - {name: members, type: List<GroupMember>}
      - name: GroupMember
        kind: dataclass
        properties:
          - {name: user_id, type: String}
          - {name: display_name, type: String}
          - {name: has_avatar, type: Boolean}
          - {name: role, type: String}
          - {name: joined_at, type: String}

  models/PendingMember.kt:
    description: Data models for pending join requests
    exports:
      - name: PendingMembersResponse
        kind: dataclass
        properties:
          - {name: pending_members, type: List<PendingMember>}
      - name: PendingMember
        kind: dataclass
        properties:
          - {name: user_id, type: String}
          - {name: display_name, type: String}
          - {name: has_avatar, type: Boolean}
          - {name: requested_at, type: String}

  models/MyProgressResponse.kt:
    description: Data models for user progress endpoint (streak, heatmap, goal breakdown)
    exports:
      - name: MyProgressResponse
        kind: dataclass
        properties:
          - {name: streak, type: StreakData}
          - {name: weekly_activity, type: WeeklyActivity}
          - {name: heatmap, type: HeatmapData}
          - {name: goal_breakdown, type: List<GoalBreakdown>}
      - name: StreakData
        kind: dataclass
        properties:
          - {name: current_streak_days, type: Int}
          - {name: longest_streak_days, type: Int}
          - {name: streak_goal_days, type: Int?}
      - name: WeeklyActivity
        kind: dataclass
        properties:
          - {name: week_start_date, type: String}
          - {name: completion_data, type: List<DayCompletion>}
      - name: DayCompletion
        kind: dataclass
        properties:
          - {name: date, type: String}
          - {name: completed, type: Boolean}
          - {name: completion_percent, type: Int}
      - name: HeatmapData
        kind: dataclass
        properties:
          - {name: start_date, type: String}
          - {name: end_date, type: String}
          - {name: days, type: List<HeatmapDay>}
      - name: HeatmapDay
        kind: dataclass
        properties:
          - {name: date, type: String}
          - {name: completion_percent, type: Int}
      - name: GoalBreakdown
        kind: dataclass
        properties:
          - {name: goal_id, type: String}
          - {name: goal_title, type: String}
          - {name: completed_count, type: Int}
          - {name: total_count, type: Int}
          - {name: completion_percent, type: Int}

  models/TodayGoalsResponse.kt:
    description: Data models for today's goals aggregated by group
    exports:
      - name: TodayGoalsResponse
        kind: dataclass
        properties:
          - {name: date, type: String}
          - {name: overall_completion_percent, type: Int}
          - {name: groups, type: List<TodayGroup>}
      - name: TodayGroup
        kind: dataclass
        properties:
          - {name: group_id, type: String}
          - {name: group_name, type: String}
          - {name: has_icon, type: Boolean}
          - {name: icon_emoji, type: String?}
          - {name: completed_count, type: Int}
          - {name: total_count, type: Int}
          - {name: goals, type: List<TodayGoal>}
      - name: TodayGoal
        kind: dataclass
        properties:
          - {name: goal_id, type: String}
          - {name: title, type: String}
          - {name: completed, type: Boolean}
          - {name: progress_value, type: Int?}
          - {name: target_value, type: Int?}
          - {name: metric_type, type: String?}
          - {name: unit, type: String?}
          - {name: icon_emoji, type: String?}

  models/GoalDetailUiModel.kt:
    description: UI models for goal detail screen
    exports:
      - name: GoalDetailUiModel
        kind: dataclass
        properties:
          - {name: goal, type: GoalDetailGoal}
          - {name: currentPeriodProgress, type: CurrentPeriodProgressUiModel?}
          - {name: streak, type: StreakUiModel?}
      - name: GoalDetailGoal
        kind: dataclass
        properties:
          - {name: id, type: String}
          - {name: group_id, type: String}
          - {name: title, type: String}
          - {name: description, type: String?}
          - {name: cadence, type: String}
          - {name: metric_type, type: String}
          - {name: target_value, type: Double?}
          - {name: unit, type: String?}
          - {name: created_at, type: String}
      - name: CurrentPeriodProgressUiModel
        kind: dataclass
        properties:
          - {name: start_date, type: String}
          - {name: end_date, type: String}
          - {name: period_type, type: String}
          - {name: user_completed, type: Double}
          - {name: user_total, type: Double}
          - {name: user_percentage, type: Int}
          - {name: display_text, type: String}
      - name: StreakUiModel
        kind: dataclass
        properties:
          - {name: current_streak, type: Int}
          - {name: best_streak, type: Int}
          - {name: unit, type: String}

  models/GoalEntryUiModel.kt:
    description: UI model for progress entry in goal detail
    exports:
      - name: GoalEntryUiModel
        kind: dataclass
        properties:
          - {name: id, type: String}
          - {name: user_id, type: String}
          - {name: display_name, type: String}
          - {name: is_current_user, type: Boolean}
          - {name: value, type: Double}
          - {name: note, type: String?}
          - {name: period_start, type: String}
          - {name: logged_at, type: String}
          - {name: date_header, type: String?}
          - {name: formatted_timestamp, type: String}

  models/GoalForLogging.kt:
    description: Minimal goal data for shared log-progress handler
    exports:
      - name: GoalForLogging
        kind: dataclass
        description: Used by GoalLogProgressHandler shared between GoalsTabFragment and TodayFragment
        properties:
          - {name: id, type: String}
          - {name: groupId, type: String}
          - {name: title, type: String}
          - {name: metricType, type: String}
          - {name: targetValue, type: Double?}
          - {name: unit, type: String?}
          - {name: completed, type: Boolean}
          - {name: progressValue, type: Double?}
          - {name: cadence, type: String}

  ui/activities/MainActivity.kt:
    description: Entry point activity - checks auth and launches onboarding or main app
    exports:
      - name: MainActivity
        kind: class
        extends: AppCompatActivity
        methods:
          - name: onCreate
            params: [{name: savedInstanceState, type: Bundle?}]
            returns: void
            description: Check auth and launch appropriate activity; handle FCM deep links
    imports:
      - app.getpursue.data.auth.SecureTokenManager

  ui/activities/OnboardingActivity.kt:
    description: Hosts first-time user onboarding flow with email/password and Google Sign-In
    exports:
      - name: OnboardingActivity
        kind: class
        extends: AppCompatActivity
        implements:
          - WelcomeFragment.Callbacks
          - SignInEmailFragment.Callbacks
          - SignUpEmailFragment.Callbacks
        methods:
          - name: onCreate
            params: [{name: savedInstanceState, type: Bundle?}]
            returns: void
            description: Initialize Google Sign-In and show WelcomeFragment
          - name: onSignInWithEmail
            params: []
            returns: void
            description: Show SignInEmailFragment
          - name: onSignIn
            params: [{name: email, type: String}, {name: password, type: String}]
            returns: void
            description: Handle email/password login
          - name: onSignUp
            params: [{name: displayName, type: String}, {name: email, type: String}, {name: password, type: String}]
            returns: void
            description: Handle email/password registration
    imports:
      - app.getpursue.data.auth (AuthRepository, GoogleSignInHelper, SecureTokenManager)
      - app.getpursue.data.fcm.FcmRegistrationHelper
      - app.getpursue.data.network.ApiClient
      - app.getpursue.ui.fragments.onboarding

  ui/activities/MainAppActivity.kt:
    description: Main app activity with bottom navigation bar hosting home tabs
    exports:
      - name: MainAppActivity
        kind: class
        extends: AppCompatActivity
        implements:
          - NavigationBarView.OnItemSelectedListener
          - HomeFragment.Callbacks
          - TodayFragment.Callbacks
          - ProfileFragment.Callbacks
        methods:
          - name: onCreate
            params: [{name: savedInstanceState, type: Bundle?}]
            returns: void
            description: Setup bottom navigation and fragment container
          - name: onItemSelected
            params: [{name: item, type: MenuItem}]
            returns: Boolean
            description: Handle bottom navigation item selection
          - name: onGroupSelected
            params: [{name: group, type: Group}]
            returns: void
            description: Launch GroupDetailActivity when group selected
          - name: onCreateGroup
            params: []
            returns: void
            description: Show CreateGroupFragment
          - name: onJoinGroup
            params: []
            returns: void
            description: Show JoinGroupBottomSheet
          - name: onViewMyProgress
            params: []
            returns: void
            description: Show MyProgressFragment
          - name: onUpgradeToPremium
            params: []
            returns: void
            description: Show PremiumFragment
          - name: onSignOut
            params: []
            returns: void
            description: Clear tokens and return to MainActivity
          - name: launchPremiumPurchaseFlow
            params: []
            returns: void
            description: Handle Google Play Billing premium purchase
          - name: showPremiumScreen
            params: []
            returns: void
            description: Show PremiumFragment
    imports:
      - app.getpursue.ui.fragments.home
      - app.getpursue.ui.fragments.groups
      - app.getpursue.data.auth
      - app.getpursue.data.fcm
      - app.getpursue.data.network.ApiClient
      - com.android.billingclient.api (Google Play Billing)

  ui/activities/GroupDetailActivity.kt:
    description: Activity for displaying group detail with ViewPager2 tabs
    exports:
      - name: GroupDetailActivity
        kind: class
        extends: AppCompatActivity
        methods:
          - name: onCreate
            params: [{name: savedInstanceState, type: Bundle?}]
            returns: void
            description: Setup toolbar and load GroupDetailFragment with initial tab
          - name: showPremiumScreen
            params: []
            returns: void
            description: Show PremiumFragment with back navigation to group
        constants:
          - {name: EXTRA_GROUP_ID, type: String}
          - {name: EXTRA_GROUP_NAME, type: String}
          - {name: EXTRA_GROUP_HAS_ICON, type: String}
          - {name: EXTRA_GROUP_ICON_EMOJI, type: String}
          - {name: EXTRA_INITIAL_TAB, type: String}
          - {name: EXTRA_OPEN_PENDING_APPROVALS, type: String}

  ui/fragments/home/HomeFragment.kt:
    description: Groups list screen with pull-to-refresh, speed dial FAB
    exports:
      - name: HomeFragment
        kind: class
        extends: Fragment
        methods:
          - name: onCreateView
            params: [{name: inflater, type: LayoutInflater}, {name: container, type: ViewGroup?}, {name: savedInstanceState, type: Bundle?}]
            returns: View
          - name: onViewCreated
            params: [{name: view, type: View}, {name: savedInstanceState, type: Bundle?}]
            returns: void
            description: Setup RecyclerView, pull-to-refresh, speed dial FAB
      - name: Callbacks
        kind: interface
        methods:
          - name: onGroupSelected
            params: [{name: group, type: Group}]
            returns: void
          - name: onCreateGroup
            params: []
            returns: void
          - name: onJoinGroup
            params: []
            returns: void
      - name: GroupsUiState
        kind: enum
        values: [LOADING, SUCCESS_WITH_DATA, SUCCESS_EMPTY, ERROR, OFFLINE]
    imports:
      - app.getpursue.models.Group
      - app.getpursue.data.network.ApiClient
      - app.getpursue.ui.adapters.GroupAdapter
      - app.getpursue.ui.views.ErrorStateView

  ui/fragments/home/TodayFragment.kt:
    description: Today's daily goals screen
    exports:
      - name: TodayFragment
        kind: class
        extends: Fragment
        methods:
          - name: onCreateView
            params: [{name: inflater, type: LayoutInflater}, {name: container, type: ViewGroup?}, {name: savedInstanceState, type: Bundle?}]
            returns: View
          - name: onViewCreated
            params: [{name: view, type: View}, {name: savedInstanceState, type: Bundle?}]
            returns: void
            description: Setup RecyclerView, pull-to-refresh, GoalLogProgressHandler
      - name: Callbacks
        kind: interface
        methods:
          - name: onViewGroups
            params: []
            returns: void
      - name: TodayUiState
        kind: enum
        values: [LOADING, SUCCESS_WITH_DATA, SUCCESS_EMPTY, ERROR, OFFLINE]
    imports:
      - app.getpursue.models.TodayGoalsResponse
      - app.getpursue.data.network.ApiClient
      - app.getpursue.ui.adapters.TodayGoalAdapter
      - app.getpursue.ui.handlers.GoalLogProgressHandler
      - app.getpursue.ui.views.EmptyStateView

  ui/fragments/home/MyProgressFragment.kt:
    description: User progress detail screen with streak, heatmap, goal breakdown
    exports:
      - name: MyProgressFragment
        kind: class
        extends: Fragment
        methods:
          - name: onCreateView
            params: [{name: inflater, type: LayoutInflater}, {name: container, type: ViewGroup?}, {name: savedInstanceState, type: Bundle?}]
            returns: View
          - name: onViewCreated
            params: [{name: view, type: View}, {name: savedInstanceState, type: Bundle?}]
            returns: void
            description: Setup RecyclerView, pull-to-refresh, display progress data
      - name: ProgressUiState
        kind: enum
        values: [LOADING, SUCCESS_WITH_DATA, SUCCESS_EMPTY, ERROR, OFFLINE]
    imports:
      - app.getpursue.models.MyProgressResponse
      - app.getpursue.data.network.ApiClient
      - app.getpursue.ui.adapters.GoalBreakdownAdapter
      - app.getpursue.ui.views.EmptyStateView

  ui/fragments/home/ProfileFragment.kt:
    description: User profile screen with avatar upload/delete, notification preferences
    exports:
      - name: ProfileFragment
        kind: class
        extends: Fragment
        methods:
          - name: onCreateView
            params: [{name: inflater, type: LayoutInflater}, {name: container, type: ViewGroup?}, {name: savedInstanceState, type: Bundle?}]
            returns: View
          - name: onViewCreated
            params: [{name: view, type: View}, {name: savedInstanceState, type: Bundle?}]
            returns: void
            description: Setup profile display, avatar picker, notification switches
      - name: Callbacks
        kind: interface
        methods:
          - name: onViewMyProgress
            params: []
            returns: void
          - name: onUpgradeToPremium
            params: []
            returns: void
          - name: onSignOut
            params: []
            returns: void
    imports:
      - app.getpursue.data.auth.SecureTokenManager
      - app.getpursue.data.network.ApiClient
      - app.getpursue.data.notifications.NotificationPreferences
      - app.getpursue.utils.ImageUtils

  ui/fragments/home/PremiumFragment.kt:
    description: Premium upgrade screen
    exports:
      - name: PremiumFragment
        kind: class
        extends: Fragment
        methods:
          - name: onCreateView
            params: [{name: inflater, type: LayoutInflater}, {name: container, type: ViewGroup?}, {name: savedInstanceState, type: Bundle?}]
            returns: View
          - name: onViewCreated
            params: [{name: view, type: View}, {name: savedInstanceState, type: Bundle?}]
            returns: void
            description: Show premium features and launch purchase flow on button click
          - name: newInstance
            params: []
            returns: PremiumFragment

  ui/fragments/groups/GroupDetailFragment.kt:
    description: Group detail screen with ViewPager2 tabs (Goals, Members, Activity)
    exports:
      - name: GroupDetailFragment
        kind: class
        extends: Fragment
        methods:
          - name: onCreate
            params: [{name: savedInstanceState, type: Bundle?}]
            returns: void
          - name: onCreateView
            params: [{name: inflater, type: LayoutInflater}, {name: container, type: ViewGroup?}, {name: savedInstanceState, type: Bundle?}]
            returns: View
          - name: onViewCreated
            params: [{name: view, type: View}, {name: savedInstanceState, type: Bundle?}]
            returns: void
            description: Setup ViewPager2 tabs, header, FAB
          - name: newInstance
            params: [{name: groupId, type: String}, {name: groupName, type: String}, {name: hasIcon, type: Boolean}, {name: iconEmoji, type: String?}, {name: initialTabIndex, type: Int}]
            returns: GroupDetailFragment
    imports:
      - app.getpursue.ui.fragments.groups (GoalsTabFragment, MembersTabFragment, ActivityTabFragment)
      - app.getpursue.data.network.ApiClient
      - androidx.viewpager2.widget.ViewPager2

  ui/fragments/groups/GoalsTabFragment.kt:
    description: Goals tab in group detail
    exports:
      - name: GoalsTabFragment
        kind: class
        extends: Fragment
        methods:
          - name: onCreate
            params: [{name: savedInstanceState, type: Bundle?}]
            returns: void
          - name: onCreateView
            params: [{name: inflater, type: LayoutInflater}, {name: container, type: ViewGroup?}, {name: savedInstanceState, type: Bundle?}]
            returns: View
          - name: onViewCreated
            params: [{name: view, type: View}, {name: savedInstanceState, type: Bundle?}]
            returns: void
            description: Setup goals RecyclerView with pull-to-refresh
          - name: newInstance
            params: [{name: groupId, type: String}, {name: isAdmin, type: Boolean}]
            returns: GoalsTabFragment

  ui/fragments/groups/MembersTabFragment.kt:
    description: Members tab in group detail with admin actions
    exports:
      - name: MembersTabFragment
        kind: class
        extends: Fragment
        methods:
          - name: onCreate
            params: [{name: savedInstanceState, type: Bundle?}]
            returns: void
          - name: onCreateView
            params: [{name: inflater, type: LayoutInflater}, {name: container, type: ViewGroup?}, {name: savedInstanceState, type: Bundle?}]
            returns: View
          - name: onViewCreated
            params: [{name: view, type: View}, {name: savedInstanceState, type: Bundle?}]
            returns: void
            description: Setup members list with admin context menus
          - name: newInstance
            params: [{name: groupId, type: String}, {name: isAdmin, type: Boolean}]
            returns: MembersTabFragment

  ui/fragments/groups/ActivityTabFragment.kt:
    description: Activity feed tab in group detail
    exports:
      - name: ActivityTabFragment
        kind: class
        extends: Fragment

  ui/fragments/groups/CreateGroupFragment.kt:
    description: Fragment for creating new group
    exports:
      - name: CreateGroupFragment
        kind: class
        extends: Fragment

  ui/fragments/groups/EditGroupFragment.kt:
    description: Fragment for editing existing group
    exports:
      - name: EditGroupFragment
        kind: class
        extends: Fragment

  ui/fragments/groups/PendingApprovalsFragment.kt:
    description: Fragment for viewing and approving pending member requests
    exports:
      - name: PendingApprovalsFragment
        kind: class
        extends: Fragment
        methods:
          - name: newInstance
            params: [{name: groupId, type: String}, {name: groupName, type: String}]
            returns: PendingApprovalsFragment

  ui/fragments/goals/CreateGoalFragment.kt:
    description: Fragment for creating goal in group
    exports:
      - name: CreateGoalFragment
        kind: class
        extends: Fragment

  ui/fragments/goals/GoalDetailFragment.kt:
    description: Fragment for viewing goal details and progress
    exports:
      - name: GoalDetailFragment
        kind: class
        extends: Fragment

  ui/fragments/onboarding/WelcomeFragment.kt:
    description: Welcome screen of onboarding flow
    exports:
      - name: WelcomeFragment
        kind: class
        extends: Fragment
        methods:
          - name: newInstance
            params: []
            returns: WelcomeFragment
      - name: Callbacks
        kind: interface
        methods:
          - name: onSignInWithEmail
            params: []
            returns: void

  ui/fragments/onboarding/SignInEmailFragment.kt:
    description: Email/password sign-in screen
    exports:
      - name: SignInEmailFragment
        kind: class
        extends: Fragment
        methods:
          - name: newInstance
            params: []
            returns: SignInEmailFragment
      - name: Callbacks
        kind: interface
        methods:
          - name: onSignIn
            params: [{name: email, type: String}, {name: password, type: String}]
            returns: void

  ui/fragments/onboarding/SignUpEmailFragment.kt:
    description: Email/password sign-up (registration) screen
    exports:
      - name: SignUpEmailFragment
        kind: class
        extends: Fragment
        methods:
          - name: newInstance
            params: []
            returns: SignUpEmailFragment
      - name: Callbacks
        kind: interface
        methods:
          - name: onSignUp
            params: [{name: displayName, type: String}, {name: email, type: String}, {name: password, type: String}]
            returns: void

  ui/handlers/GoalLogProgressHandler.kt:
    description: Shared handler for goal card body tap (log, edit, remove progress)
    exports:
      - name: GoalLogProgressHandler
        kind: class
        description: Used by GoalsTabFragment and TodayFragment to avoid duplication
        methods:
          - name: handleCardBodyClick
            params: [{name: goal, type: GoalForLogging}]
            returns: void
            description: Handle tap on goal card (log/edit for numeric, toggle for binary)
    imports:
      - app.getpursue.models.GoalForLogging
      - app.getpursue.data.network.ApiClient
      - app.getpursue.ui.dialogs.LogProgressDialog
      - kotlinx.coroutines

  ui/dialogs/LogProgressDialog.kt:
    description: Dialog for logging/editing numeric goal progress
    exports:
      - name: LogProgressDialog
        kind: class
        extends: DialogFragment
        methods:
          - name: onCreate
            params: [{name: savedInstanceState, type: Bundle?}]
            returns: void
          - name: onCreateDialog
            params: [{name: savedInstanceState, type: Bundle?}]
            returns: Dialog
            description: Create dialog with number input and note field
          - name: newInstance
            params: [{name: goalTitle, type: String}, {name: unit, type: String?}, {name: isEditMode, type: Boolean}, {name: currentValue, type: Double?}, {name: currentNote, type: String?}]
            returns: LogProgressDialog
      - name: LogProgressListener
        kind: interface
        methods:
          - name: onLogProgress
            params: [{name: value, type: Double}, {name: note, type: String?}]
            returns: void
      - name: DeleteProgressListener
        kind: interface
        methods:
          - name: onDeleteProgress
            params: []
            returns: void

  ui/adapters/GroupAdapter.kt:
    description: RecyclerView adapter for group cards list
    exports:
      - name: GroupAdapter
        kind: class
        extends: RecyclerView.Adapter<GroupAdapter.GroupViewHolder>
        methods:
          - name: onCreateViewHolder
            params: [{name: parent, type: ViewGroup}, {name: viewType, type: Int}]
            returns: GroupViewHolder
          - name: onBindViewHolder
            params: [{name: holder, type: GroupViewHolder}, {name: position, type: Int}]
            returns: void
          - name: getItemCount
            params: []
            returns: Int

  ui/adapters/TodayGoalAdapter.kt:
    description: RecyclerView adapter for today's daily goals
    exports:
      - name: TodayGoalAdapter
        kind: class
        extends: RecyclerView.Adapter<TodayGoalAdapter.TodayGoalViewHolder>

  ui/adapters/GroupGoalsAdapter.kt:
    description: RecyclerView adapter for group goals
    exports:
      - name: GroupGoalsAdapter
        kind: class
        extends: RecyclerView.Adapter<GroupGoalsAdapter.GoalViewHolder>

  ui/adapters/GroupMembersAdapter.kt:
    description: RecyclerView adapter for group members
    exports:
      - name: GroupMembersAdapter
        kind: class
        extends: RecyclerView.Adapter<GroupMembersAdapter.MemberViewHolder>

  ui/adapters/GroupActivityAdapter.kt:
    description: RecyclerView adapter for group activity feed
    exports:
      - name: GroupActivityAdapter
        kind: class
        extends: RecyclerView.Adapter<GroupActivityAdapter.ActivityViewHolder>

  ui/adapters/GoalBreakdownAdapter.kt:
    description: RecyclerView adapter for goal breakdown in progress screen
    exports:
      - name: GoalBreakdownAdapter
        kind: class
        extends: RecyclerView.Adapter<GoalBreakdownAdapter.GoalBreakdownViewHolder>

  ui/adapters/GoalEntryAdapter.kt:
    description: RecyclerView adapter for goal progress entries
    exports:
      - name: GoalEntryAdapter
        kind: class
        extends: RecyclerView.Adapter<GoalEntryAdapter.GoalEntryViewHolder>

  ui/adapters/PendingMembersAdapter.kt:
    description: RecyclerView adapter for pending member requests
    exports:
      - name: PendingMembersAdapter
        kind: class
        extends: RecyclerView.Adapter<PendingMembersAdapter.PendingMemberViewHolder>

  ui/views/EmptyStateView.kt:
    description: Reusable empty state view component
    exports:
      - name: EmptyStateView
        kind: class
        methods:
          - name: setOnBrowseGroupsClickListener
            params: [{name: listener, type: View.OnClickListener}]
            returns: void
          - name: setOnViewTodaysGoalsClickListener
            params: [{name: listener, type: View.OnClickListener}]
            returns: void
          - name: inflateToday
            params: [{name: inflater, type: LayoutInflater}, {name: parent, type: ViewGroup}]
            returns: EmptyStateView
            description: Create empty state view for Today screen
          - name: inflateProgress
            params: [{name: inflater, type: LayoutInflater}, {name: parent, type: ViewGroup}]
            returns: EmptyStateView
            description: Create empty state view for Progress screen
        properties:
          - {name: view, type: View, description: Root view}

  ui/views/ErrorStateView.kt:
    description: Reusable error state view component
    exports:
      - name: ErrorStateView
        kind: class

  ui/views/IconPickerBottomSheet.kt:
    description: Bottom sheet for selecting goal/group icon emoji
    exports:
      - name: IconPickerBottomSheet
        kind: class
        extends: BottomSheetDialogFragment

  ui/views/InviteMembersBottomSheet.kt:
    description: Bottom sheet for inviting members to group
    exports:
      - name: InviteMembersBottomSheet
        kind: class
        extends: BottomSheetDialogFragment

  ui/views/JoinGroupBottomSheet.kt:
    description: Bottom sheet for joining group via invite code
    exports:
      - name: JoinGroupBottomSheet
        kind: class
        extends: BottomSheetDialogFragment

  utils/ImageUtils.kt:
    description: Image utilities for avatar handling and EXIF orientation
    exports:
      - name: ImageUtils
        kind: object
        description: Utility functions for image handling
        methods:
          - name: createLetterAvatar
            params: [{name: context, type: Context}, {name: name, type: String}, {name: backgroundColor, type: Int}, {name: size, type: Int}]
            returns: Drawable
            description: Create letter avatar from first character of name
          - name: uriToFileWithNormalizedOrientation
            params: [{name: context, type: Context}, {name: uri, type: Uri}]
            returns: File?
            description: Convert URI to File with EXIF orientation normalized
          - name: uriToFile
            params: [{name: context, type: Context}, {name: uri, type: Uri}]
            returns: File?
            description: Convert URI to File for multipart upload
          - name: createImagePart
            params: [{name: imageFile, type: File}, {name: partName, type: String}]
            returns: MultipartBody.Part
            description: Create MultipartBody.Part from image file
          - name: createImagePartFromUri
            params: [{name: context, type: Context}, {name: uri, type: Uri}, {name: partName, type: String}]
            returns: MultipartBody.Part?
            description: Create MultipartBody.Part from URI
    imports:
      - androidx.exifinterface.media.ExifInterface
      - okhttp3 (Multipart)

  utils/RelativeTimeUtils.kt:
    description: Utility for parsing ISO 8601 timestamps and formatting as relative time
    exports:
      - name: RelativeTimeUtils
        kind: object
        description: Parse ISO timestamps and format as relative time strings
        methods:
          - name: parseIsoTimestamp
            params: [{name: isoTimestamp, type: String}]
            returns: Date?
            description: Parse ISO 8601 timestamp (with or without milliseconds) as UTC
          - name: formatRelativeTime
            params: [{name: context, type: Context}, {name: isoTimestamp, type: String}]
            returns: String
            description: Format ISO timestamp as relative time (e.g., "2 hours ago")

  utils/GrayscaleTransformation.kt:
    description: Glide transformation for grayscale image effect
    exports:
      - name: GrayscaleTransformation
        kind: class
        implements: Transformation<Drawable>
